#!/usr/bin/env node

var fs = require('fs'),
	path = require('path'),
	slab = require('./../vendor/slab/src/slab.js').slab

var args = process.argv.splice(2),
	dir = path.normalize(args[0]),
	files = fs.readdirSync(dir),
	tpl = ''

while (files.length) {
	var file = files.shift()
	tpl += fs.readFileSync(dir+'/'+file, 'utf-8')
}

var out = '(function(){'+"\n"+
	slab.generate('templates', tpl)+"\n"+
	'slab.register(templates);'+"\n"+
	'})();'
console.log(out)

